export const DEFAULT_METADATA_URL = 'https://raw.githubusercontent.com/antigravity-js/gacha-metadata/main/mapping.json'; // Placeholder

export const LOCAL_SIGNATURE_MAP: any = {
    hk4e: {
        // 蒙德
        '迪卢克': ['狼的末路'], 'Diluc': ["Wolf's Gravestone"],
        '琴': ['风鹰剑'], 'Jean': ['Aquila Favonia'],
        '温迪': ['终末嗟叹之诗'], 'Venti': ['Elegy for the End'],
        '可莉': ['四风原典'], 'Klee': ['Lost Prayer to the Sacred Winds'],
        '阿贝多': ['苍古自由之誓'], 'Albedo': ['Freedom-Sworn'], // 常用五星，虽无专
        '优菈': ['松赖响起之时'], 'Eula': ['Song of Broken Pines'],
        '莫娜': ['四风原典'], 'Mona': ['Lost Prayer to the Sacred Winds'], // 常驻通用
        // 璃月
        '魈': ['和璞鸢'], 'Xiao': ['Primordial Jade Winged-Spear'],
        '胡桃': ['护摩之杖'], 'Hu Tao': ['Staff of Homa'],
        '钟离': ['贯虹之槊', '护摩之杖'], 'Zhongli': ['Vortex Vanquisher'],
        '甘雨': ['阿莫斯之弓'], 'Ganyu': ["Amos' Bow"],
        '申鹤': ['息灾'], 'Shenhe': ['Calamity Queller'],
        '夜兰': ['若水'], 'Yelan': ['Aqua Simulacra'],
        '白术': ['碧落之珑'], 'Baizhu': ['Jadefall\'s Splendor'],
        '闲云': ['鹤鸣余音'], 'Xianyun': ['Crane\'s Echoing Call'],
        '刻晴': ['雾切之回光'], 'Keqing': ['Mistsplitter Reforged'], // 常驻常用
        '七七': ['风鹰剑'], 'Qiqi': ['Aquila Favonia'],
        // 稻妻
        '神里绫华': ['雾切之回光'], 'Kamisato Ayaka': ['Mistsplitter Reforged'],
        '枫原万叶': ['苍古自由之誓'], 'Kaedehara Kazuha': ['Freedom-Sworn'],
        '雷电将军': ['薙草之稻光'], 'Raiden Shogun': ['Engulfing Lightning'],
        '宵宫': ['飞雷之弦振'], 'Yoimiya': ['Thundering Pulse'],
        '珊瑚宫心海': ['不灭月华'], 'Sangonomiya Kokomi': ['Everlasting Moonglow'],
        '荒泷一斗': ['赤角石溃杵'], 'Arataki Itto': ['Redhorn Stonethresher'],
        '八重神子': ['神乐之真意'], 'Yae Miko': ['Kagura\'s Verity'],
        '神里绫人': ['波乱月白经津'], 'Kamisato Ayato': ['Haran Geppaku Futsu'],
        '千织': ['有乐御珀切'], 'Chiori': ['Uraku Misugiri'],
        // 须弥
        '提纳里': ['猎人之径'], 'Tighnari': ["Hunter's Path"],
        '赛诺': ['赤沙之杖'], 'Cyno': ['Staff of the Scarlet Sands'],
        '妮露': ['圣显之钥'], 'Nilou': ['Key of Khaj-Nisut'],
        '纳西妲': ['千夜浮梦'], 'Nahida': ['A Thousand Floating Dreams'],
        '流浪者': ['图莱杜拉的回忆'], 'Wanderer': ['Tulaytullah\'s Remembrance'],
        '艾尔海森': ['裁叶萃光'], 'Alhaitham': ['Light of Foliar Incision'],
        '迪希雅': ['苇海信标'], 'Dehya': ['Beacon of the Reed Sea'],
        // 枫丹
        '林尼': ['最初的大魔术'], 'Lyney': ['The First Great Magic'],
        '那维莱特': ['万世流涌大典'], 'Neuvillette': ['Tome of the Eternal Flow'],
        '莱欧斯利': ['金流监督'], 'Wriothesley': ['Cashflow Supervision'],
        '芙宁娜': ['静水流涌之辉'], 'Furina': ['Splendor of Tranquil Waters'],
        '娜维娅': ['裁断'], 'Navia': ['Verdict'],
        '仆人': ['赤月之形'], 'Arlecchino': ['Crimson Moon\'s Semblance'],
        '克洛琳德': ['赦罪'], 'Clorinde': ['Absolution'],
        '希格雯': ['白雨心弦'], 'Sigewinne': ['Silvershower Heartstrings'],
        '艾梅莉埃': ['柔灯挽歌'], 'Emilie': ['Lumidouce Elegy'],
        // 纳塔
        '玛拉妮': ['冲浪时光'], 'Mualani': ['Surf\'s Up'],
        '基尼奇': ['山王长牙'], 'Kinich': ['Fang of the Mountain King'],
        '希诺宁': ['岩峰巡歌'], 'Xilonen': ['Peak Patrol Song'],
        '恰斯卡': ['星鹫赤羽'], 'Chasca': ['Astral Vulture\'s Crimson Plumage']
    },
    hkrpg: {
        // 始发/常驻
        '希儿': ['于夜色中'], 'Seele': ['In the Night'],
        '景元': ['拂晓之前'], 'Jing Yuan': ['Before Dawn'],
        '彦卿': ['如泥酣眠'], 'Yanqing': ['Sleep Like the Dead'],
        '白露': ['时节不居'], 'Bailu': ['Time Waits for No One'],
        '杰帕德': ['制胜的瞬间'], 'Gepard': ['Moment of Victory'],
        '布洛妮娅': ['但战斗还未结束'], 'Bronya': ['But the Battle Isn\'t Over'],
        '瓦尔特': ['以世界之名'], 'Welt': ['In the Name of the World'],
        '姬子': ['银河铁道之夜'], 'Himeko': ['Night on the Milky Way'],
        '克拉拉': ['无可取代的东西'], 'Clara': ['Something Irreplaceable'],
        // 1.x
        '银狼': ['雨一直下'], 'Silver Wolf': ['Incessant Rain'],
        '罗刹': ['棺的回响'], 'Luocha': ['Echoes of the Coffin'],
        '刃': ['到不了的彼岸'], 'Blade': ['The Unreachable Side'],
        '卡芙卡': ['只需等待'], 'Kafka': ['Patience Is All You Need'],
        '丹恒·饮月': ['比阳光更明亮的'], 'Dan Heng • Imbibitor Lunae': ['Brighter Than the Sun'],
        '符玄': ['她已闭上双眼'], 'Fu Xuan': ['She Already Closed Her Eyes'],
        '镜流': ['此身为剑'], 'Jingliu': ['I Shall Be My Own Sword'],
        '托帕&账账': ['烦恼着，幸福着'], 'Topaz & Numby': ['Worrisome, Blissful'],
        '霍霍': ['惊魂夜'], 'Huohuo': ['Night of Fright'],
        '银枝': ['片刻，留在眼底'], 'Argenti': ['An Instant Before A Gaze'],
        '阮·梅': ['镜中故我'], 'Ruan Mei': ['Past Self in Mirror'],
        '真理医生': ['纯粹思维的洗礼'], 'Dr. Ratio': ['Baptism of Pure Thought'],
        '花火': ['游戏尘寰'], 'Sparkle': ['Earthly Escapade'],
        '黑天鹅': ['重塑时光之忆'], 'Black Swan': ['Reforged Remembrance'],
        // 2.x 匹诺康尼
        '黄泉': ['行于流逝的岸'], 'Acheron': ['Along the Passing Shore'],
        '砂金': ['命运从未公平'], 'Aventurine': ['Inherently Unjust Destiny'],
        '知更鸟': ['夜色流光溢彩'], 'Robin': ['Flowing Nightglow'],
        '波提欧': ['驶向第二次生命'], 'Boothill': ['Sailing Towards A Second Life'],
        '流萤': ['梦应归于何处'], 'Firefly': ['Whereabouts Should Dreams Rest'],
        '翡翠': ['偏偏希望无价'], 'Jade': ['Yet Hope Is Priceless'],
        '云璃': ['落时云霞'], 'Yunli': ['Dance at Sunset'],
        '椒丘': ['那无数个春天'], 'Jiaoqiu': ['Those Many Springs'],
        '飞霄': ['我将，巡征追猎'], 'Feixiao': ['I Venture Forth to Hunt'],
        '灵砂': ['唯有香如故'], 'Lingsha': ['Scent Alone Stays True'],
        '乱破': ['忍法帖·缭乱破魔'], 'Rappa': ['Ninjutsu Inscription: Dazzling Evilbreaker'],
        // 3.x
        '忘归人': ['长路终有归途'], 'The Herta': ['Long Road Leads Home'], // 假设/占位
        '星期日': ['一种想要飞翔的渴望'], 'Sunday': ['A Grounded Ascent'] // 假设
    },
    nap: {
        // 1.0
        '艾莲': ['深海访客'], 'Ellen': ['Deep Sea Visitor'],
        '朱鸢': ['防暴者VI型'], 'Zhu Yuan': ['Riot Suppressor VI'],
        '青衣': ['玉壶青冰'], 'Qingyi': ['Ice-Jade Teapot'],
        '简': ['淬锋钳刺'], 'Jane': ['Sharpened Stinger'],
        '凯撒': ['奔袭獠牙'], 'Caesar': ['Tusk of Fury'],
        '柏尼斯': ['灼心摇壶'], 'Burnice': ['Flamemaker Shaker'],
        '柳': ['时流贤者'], 'Yanagi': ['Timeweaver'],
        '莱特': ['焰心剪'], 'Lighter': ['Blazing Shears'],
        // 常驻
        '猫又': ['钢铁肉垫'], 'Nekomata': ['Steel Cushion'],
        '柯蕾吉': ['燃狱齿轮'], 'Koleda': ['Hellfire Gears'],
        '莱卡恩': ['拘缚者'], 'Lycaon': ['The Restrained'],
        '格莉丝': ['嵌合赫德'], 'Grace': ['Fusion Compiler'],
        '丽娜': ['啜泣摇篮'], 'Rina': ['Weeping Cradle'],
        '11号': ['硫磺石'], 'Soldier 11': ['The Brimstone']
    }
};

export async function fetchMetadata(url: string = DEFAULT_METADATA_URL) {
    try {
        const res = await fetch(url);
        if (!res.ok) throw new Error('Network response was not ok');
        return await res.json();
    } catch (error) {
        console.warn('Failed to fetch remote metadata, using local fallback:', error);
        return LOCAL_SIGNATURE_MAP;
    }
}
